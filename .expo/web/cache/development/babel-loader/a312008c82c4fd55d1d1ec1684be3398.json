{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { create } from \"apisauce\";\nimport cache from \"../authorization/cache\";\nimport authStorage from \"../authorization/store\";\nvar apiClient = create({\n  baseURL: \"https://medisend-pharmacy.herokuapp.com\",\n  headers: {\n    'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjliMThlZGIyYmM2ZGEwMTBkZGJiYjciLCJpYXQiOjE2MDUxOTMyNTcsImV4cCI6MTYwNTI3OTY1N30.E-dM1dBgKTFQIc_QjCxn5BZ9fD77PpKYB0Q57Zi0be4'\n  }\n});\nvar get = apiClient.get;\n\napiClient.get = function _callee(url, params, axiosConfig) {\n  var response, data;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return _regeneratorRuntime.awrap(get(url, params, axiosConfig));\n\n        case 2:\n          response = _context.sent;\n\n          if (!response.ok) {\n            _context.next = 6;\n            break;\n          }\n\n          cache.store(url, response.data);\n          return _context.abrupt(\"return\", response);\n\n        case 6:\n          _context.next = 8;\n          return _regeneratorRuntime.awrap(cache.get(url));\n\n        case 8:\n          data = _context.sent;\n          return _context.abrupt(\"return\", data ? {\n            ok: true,\n            data: data\n          } : response);\n\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nexport default apiClient;","map":{"version":3,"sources":["/Users/iShrusti/Documents/GitHub/Pharmacy_App/components/api/client.js"],"names":["create","cache","authStorage","apiClient","baseURL","headers","get","url","params","axiosConfig","response","ok","store","data"],"mappings":";AAAA,SAASA,MAAT,QAAuB,UAAvB;AACA,OAAOC,KAAP;AACA,OAAOC,WAAP;AAEA,IAAMC,SAAS,GAAGH,MAAM,CAAC;AACrBI,EAAAA,OAAO,EAAE,yCADY;AAErBC,EAAAA,OAAO,EAAE;AACT,qBACI;AAFK;AAFY,CAAD,CAAxB;AAcE,IAAMC,GAAG,GAAGH,SAAS,CAACG,GAAtB;;AACFH,SAAS,CAACG,GAAV,GAAgB,iBAAOC,GAAP,EAAYC,MAAZ,EAAoBC,WAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CACSH,GAAG,CAACC,GAAD,EAAMC,MAAN,EAAcC,WAAd,CADZ;;AAAA;AACRC,UAAAA,QADQ;;AAAA,eAGVA,QAAQ,CAACC,EAHC;AAAA;AAAA;AAAA;;AAIZV,UAAAA,KAAK,CAACW,KAAN,CAAYL,GAAZ,EAAiBG,QAAQ,CAACG,IAA1B;AAJY,2CAKLH,QALK;;AAAA;AAAA;AAAA,2CAQKT,KAAK,CAACK,GAAN,CAAUC,GAAV,CARL;;AAAA;AAQRM,UAAAA,IARQ;AAAA,2CASPA,IAAI,GAAG;AAAEF,YAAAA,EAAE,EAAE,IAAN;AAAYE,YAAAA,IAAI,EAAJA;AAAZ,WAAH,GAAwBH,QATrB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAhB;;AAYA,eAAeP,SAAf","sourcesContent":["import { create } from \"apisauce\";\nimport cache from \"../authorization/cache\";\nimport authStorage from \"../authorization/store\";\n\nconst apiClient = create({\n    baseURL: \"https://medisend-pharmacy.herokuapp.com\",\n    headers: {\n    'Authorization' :\n        'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI1ZjliMThlZGIyYmM2ZGEwMTBkZGJiYjciLCJpYXQiOjE2MDUxOTMyNTcsImV4cCI6MTYwNTI3OTY1N30.E-dM1dBgKTFQIc_QjCxn5BZ9fD77PpKYB0Q57Zi0be4',\n    },\n  });\n\n// apiClient.addAsyncRequestTransform(async (request) => {\n//   const authToken = await authStorage.getToken();\n//   if (!authToken) return;\n//   request.headers[\"Authorization\"] = authToken.accessToken;\n// });\n  \n  const get = apiClient.get;\napiClient.get = async (url, params, axiosConfig) => {\n  const response = await get(url, params, axiosConfig);\n\n  if (response.ok) {\n    cache.store(url, response.data);\n    return response;\n  }\n\n  const data = await cache.get(url);\n  return data ? { ok: true, data } : response;\n};\n\nexport default apiClient;\n"]},"metadata":{},"sourceType":"module"}